import{J as ne,K as X,L as ie,c as N,O as re,a as b,b as C,n as G,l as Y,e as p,P as Xe,r as $,i as A,t as z,p as S,f as M,y as D,m as _,k as I,M as R,_ as Ye,Q as Se,R as et,S as tt,j as de,U as st,F as K,g as pe,V as Ue,o as De,s as nt,w as it,A as $e,W as rt,C as ze,z as ot,D as lt,X as ue,B as at,u as me}from"./index-5aWETVbQ.js";import{O as fe,d as Ne,a as xe,b as je,c as ut,g as ct,e as dt,s as Ae}from"./config-C03strlz.js";import{u as ft}from"./useList-DtciY06y.js";const pt=X({name:"IconCode",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:f}){const s=ie("icon"),r=N(()=>[s,`${s}-code`,{[`${s}-spin`]:e.spin}]),g=N(()=>{const i={};return e.size&&(i.fontSize=re(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:r,innerStyle:g,onClick:i=>{f("click",i)}}}}),vt=["stroke-width","stroke-linecap","stroke-linejoin"],ht=p("path",{d:"M16.734 12.686 5.42 24l11.314 11.314m14.521-22.628L42.57 24 31.255 35.314M27.2 6.28l-6.251 35.453"},null,-1),mt=[ht];function gt(e,f,s,r,g,l){return b(),C("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:G(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},mt,14,vt)}var ge=ne(pt,[["render",gt]]);const wt=Object.assign(ge,{install:(e,f)=>{var s;const r=(s=f==null?void 0:f.iconPrefix)!=null?s:"";e.component(r+ge.name,ge)}}),kt=X({name:"IconRefresh",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:f}){const s=ie("icon"),r=N(()=>[s,`${s}-refresh`,{[`${s}-spin`]:e.spin}]),g=N(()=>{const i={};return e.size&&(i.fontSize=re(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:r,innerStyle:g,onClick:i=>{f("click",i)}}}}),yt=["stroke-width","stroke-linecap","stroke-linejoin"],bt=p("path",{d:"M38.837 18C36.463 12.136 30.715 8 24 8 15.163 8 8 15.163 8 24s7.163 16 16 16c7.455 0 13.72-5.1 15.496-12M40 8v10H30"},null,-1),xt=[bt];function _t(e,f,s,r,g,l){return b(),C("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:G(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},xt,14,yt)}var we=ne(kt,[["render",_t]]);const Ct=Object.assign(we,{install:(e,f)=>{var s;const r=(s=f==null?void 0:f.iconPrefix)!=null?s:"";e.component(r+we.name,we)}}),Ft=X({name:"IconCommon",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:f}){const s=ie("icon"),r=N(()=>[s,`${s}-common`,{[`${s}-spin`]:e.spin}]),g=N(()=>{const i={};return e.size&&(i.fontSize=re(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:r,innerStyle:g,onClick:i=>{f("click",i)}}}}),Lt=["stroke-width","stroke-linecap","stroke-linejoin"],It=p("path",{d:"M24 23 7.652 14.345M24 23l16.366-8.664M24 23v19.438M7 14v20l17 9 17-9V14L24 5 7 14Z"},null,-1),St=[It];function $t(e,f,s,r,g,l){return b(),C("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:G(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},St,14,Lt)}var ke=ne(Ft,[["render",$t]]);const zt=Object.assign(ke,{install:(e,f)=>{var s;const r=(s=f==null?void 0:f.iconPrefix)!=null?s:"";e.component(r+ke.name,ke)}}),jt=X({name:"IconFolder",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:f}){const s=ie("icon"),r=N(()=>[s,`${s}-folder`,{[`${s}-spin`]:e.spin}]),g=N(()=>{const i={};return e.size&&(i.fontSize=re(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:r,innerStyle:g,onClick:i=>{f("click",i)}}}}),At=["stroke-width","stroke-linecap","stroke-linejoin"],Et=p("path",{d:"M6 13h18l-2.527-3.557a1.077 1.077 0 0 0-.88-.443H7.06C6.474 9 6 9.448 6 10v3Zm0 0h33.882c1.17 0 2.118.895 2.118 2v21c0 1.105-.948 3-2.118 3H8.118C6.948 39 6 38.105 6 37V13Z"},null,-1),Ut=[Et];function Dt(e,f,s,r,g,l){return b(),C("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:G(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},Ut,14,At)}var ye=ne(jt,[["render",Dt]]);const Nt=Object.assign(ye,{install:(e,f)=>{var s;const r=(s=f==null?void 0:f.iconPrefix)!=null?s:"";e.component(r+ye.name,ye)}}),Pt=X({name:"IconImage",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:f}){const s=ie("icon"),r=N(()=>[s,`${s}-image`,{[`${s}-spin`]:e.spin}]),g=N(()=>{const i={};return e.size&&(i.fontSize=re(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:r,innerStyle:g,onClick:i=>{f("click",i)}}}}),Mt=["stroke-width","stroke-linecap","stroke-linejoin"],Rt=p("path",{d:"m24 33 9-9v9h-9Zm0 0-3.5-4.5L17 33h7Zm15 8H9a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h30a2 2 0 0 1 2 2v30a2 2 0 0 1-2 2ZM15 15h2v2h-2v-2Z"},null,-1),Ot=p("path",{d:"M33 33v-9l-9 9h9ZM23.5 33l-3-4-3 4h6ZM15 15h2v2h-2z",fill:"currentColor",stroke:"none"},null,-1),Vt=[Rt,Ot];function Tt(e,f,s,r,g,l){return b(),C("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:G(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},Vt,14,Mt)}var be=ne(Pt,[["render",Tt]]);const Wt=Object.assign(be,{install:(e,f)=>{var s;const r=(s=f==null?void 0:f.iconPrefix)!=null?s:"";e.component(r+be.name,be)}});function ce(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pe={exports:{}};(function(e,f){(function(s){e.exports=s()})(function(){return function s(r,g,l){function i(m,n){if(!g[m]){if(!r[m]){var o=typeof ce=="function"&&ce;if(!n&&o)return o(m,!0);if(k)return k(m,!0);var c=new Error("Cannot find module '"+m+"'");throw c.code="MODULE_NOT_FOUND",c}var w=g[m]={exports:{}};r[m][0].call(w.exports,function(F){var a=r[m][1][F];return i(a||F)},w,w.exports,s,r,g,l)}return g[m].exports}for(var k=typeof ce=="function"&&ce,x=0;x<l.length;x++)i(l[x]);return i}({1:[function(s,r,g){function l(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}r.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._maxListeners=void 0,l.defaultMaxListeners=10,l.prototype.setMaxListeners=function(n){if(!k(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},l.prototype.emit=function(n){var o,c,w,F,a,t;if(this._events||(this._events={}),n==="error"&&(!this._events.error||x(this._events.error)&&!this._events.error.length)){if(o=arguments[1],o instanceof Error)throw o;var d=new Error('Uncaught, unspecified "error" event. ('+o+")");throw d.context=o,d}if(c=this._events[n],m(c))return!1;if(i(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:F=Array.prototype.slice.call(arguments,1),c.apply(this,F)}else if(x(c))for(F=Array.prototype.slice.call(arguments,1),t=c.slice(),w=t.length,a=0;a<w;a++)t[a].apply(this,F);return!0},l.prototype.addListener=function(n,o){var c;if(!i(o))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,i(o.listener)?o.listener:o),this._events[n]?x(this._events[n])?this._events[n].push(o):this._events[n]=[this._events[n],o]:this._events[n]=o,x(this._events[n])&&!this._events[n].warned&&(m(this._maxListeners)?c=l.defaultMaxListeners:c=this._maxListeners,c&&c>0&&this._events[n].length>c&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),typeof console.trace=="function"&&console.trace())),this},l.prototype.on=l.prototype.addListener,l.prototype.once=function(n,o){if(!i(o))throw TypeError("listener must be a function");var c=!1;function w(){this.removeListener(n,w),c||(c=!0,o.apply(this,arguments))}return w.listener=o,this.on(n,w),this},l.prototype.removeListener=function(n,o){var c,w,F,a;if(!i(o))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(c=this._events[n],F=c.length,w=-1,c===o||i(c.listener)&&c.listener===o)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,o);else if(x(c)){for(a=F;a-- >0;)if(c[a]===o||c[a].listener&&c[a].listener===o){w=a;break}if(w<0)return this;c.length===1?(c.length=0,delete this._events[n]):c.splice(w,1),this._events.removeListener&&this.emit("removeListener",n,o)}return this},l.prototype.removeAllListeners=function(n){var o,c;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[n]&&delete this._events[n],this;if(arguments.length===0){for(o in this._events)o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[n],i(c))this.removeListener(n,c);else if(c)for(;c.length;)this.removeListener(n,c[c.length-1]);return delete this._events[n],this},l.prototype.listeners=function(n){var o;return!this._events||!this._events[n]?o=[]:i(this._events[n])?o=[this._events[n]]:o=this._events[n].slice(),o},l.prototype.listenerCount=function(n){if(this._events){var o=this._events[n];if(i(o))return 1;if(o)return o.length}return 0},l.listenerCount=function(n,o){return n.listenerCount(o)};function i(n){return typeof n=="function"}function k(n){return typeof n=="number"}function x(n){return typeof n=="object"&&n!==null}function m(n){return n===void 0}},{}],2:[function(s,r,g){var l,i,k,x,m;m=navigator.userAgent.toLowerCase(),x=navigator.platform.toLowerCase(),l=m.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],k=l[1]==="ie"&&document.documentMode,i={name:l[1]==="version"?l[3]:l[1],version:k||parseFloat(l[1]==="opera"&&l[4]?l[4]:l[2]),platform:{name:m.match(/ip(?:ad|od|hone)/)?"ios":(m.match(/(?:webos|android)/)||x.match(/mac|win|linux/)||["other"])[0]}},i[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.platform[i.platform.name]=!0,r.exports=i},{}],3:[function(s,r,g){var l,i,k,x=function(c,w){for(var F in w)m.call(w,F)&&(c[F]=w[F]);function a(){this.constructor=c}return a.prototype=w.prototype,c.prototype=new a,c.__super__=w.prototype,c},m={}.hasOwnProperty,n=[].indexOf||function(c){for(var w=0,F=this.length;w<F;w++)if(w in this&&this[w]===c)return w;return-1},o=[].slice;l=s("events").EventEmitter,k=s("./browser.coffee"),i=function(c){var w,F;x(a,c),w={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},F={delay:500,copy:!1};function a(t){var d,h,y;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t);for(h in w)y=w[h],(d=this.options)[h]==null&&(d[h]=y)}return a.prototype.setOption=function(t,d){if(this.options[t]=d,this._canvas!=null&&(t==="width"||t==="height"))return this._canvas[t]=d},a.prototype.setOptions=function(t){var d,h,y;h=[];for(d in t)m.call(t,d)&&(y=t[d],h.push(this.setOption(d,y)));return h},a.prototype.addFrame=function(t,d){var h,y;d==null&&(d={}),h={},h.transparent=this.options.transparent;for(y in F)h[y]=d[y]||F[y];if(this.options.width==null&&this.setOption("width",t.width),this.options.height==null&&this.setOption("height",t.height),typeof ImageData<"u"&&ImageData!==null&&t instanceof ImageData)h.data=t.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&t instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&t instanceof WebGLRenderingContext)d.copy?h.data=this.getContextData(t):h.context=t;else if(t.childNodes!=null)d.copy?h.data=this.getImageData(t):h.image=t;else throw new Error("Invalid image");return this.frames.push(h)},a.prototype.render=function(){var t,d,h;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var y,E,U;for(U=[],y=0,E=this.frames.length;0<=E?y<E:y>E;0<=E?++y:--y)U.push(null);return U}).call(this),d=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(t=0,h=d;0<=h?t<h:t>h;0<=h?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},a.prototype.abort=function(){for(var t;t=this.activeWorkers.shift(),t!=null;)this.log("killing active worker"),t.terminate();return this.running=!1,this.emit("abort")},a.prototype.spawnWorkers=function(){var t,d,h;return t=Math.min(this.options.workers,this.frames.length),(function(){h=[];for(var y=d=this.freeWorkers.length;d<=t?y<t:y>t;d<=t?y++:y--)h.push(y);return h}).apply(this).forEach(function(y){return function(E){var U;return y.log("spawning worker "+E),U=new Worker(y.options.workerScript),U.onmessage=function(W){return y.activeWorkers.splice(y.activeWorkers.indexOf(U),1),y.freeWorkers.push(U),y.frameFinished(W.data)},y.freeWorkers.push(U)}}(this)),t},a.prototype.frameFinished=function(t){var d,h;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,this.options.globalPalette===!0&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(d=1,h=this.freeWorkers.length;1<=h?d<h:d>h;1<=h?++d:--d)this.renderNextFrame();return n.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},a.prototype.finishRendering=function(){var t,d,h,y,E,U,W,q,oe,le,ae,Q,B,ee,H,te;for(q=0,ee=this.imageParts,E=0,oe=ee.length;E<oe;E++)d=ee[E],q+=(d.data.length-1)*d.pageSize+d.cursor;for(q+=d.pageSize-d.cursor,this.log("rendering finished - filesize "+Math.round(q/1e3)+"kb"),t=new Uint8Array(q),Q=0,H=this.imageParts,U=0,le=H.length;U<le;U++)for(d=H[U],te=d.data,h=W=0,ae=te.length;W<ae;h=++W)B=te[h],t.set(B,Q),h===d.data.length-1?Q+=d.cursor:Q+=d.pageSize;return y=new Blob([t],{type:"image/gif"}),this.emit("finished",y,t)},a.prototype.renderNextFrame=function(){var t,d,h;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],h=this.freeWorkers.shift(),d=this.getTask(t),this.log("starting frame "+(d.index+1)+" of "+this.frames.length),this.activeWorkers.push(h),h.postMessage(d)},a.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},a.prototype.getImageData=function(t){var d;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),d=this._canvas.getContext("2d"),d.setFill=this.options.background,d.fillRect(0,0,this.options.width,this.options.height),d.drawImage(t,0,0),this.getContextData(d)},a.prototype.getTask=function(t){var d,h;if(d=this.frames.indexOf(t),h={index:d,last:d===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:k.name==="chrome"},t.data!=null)h.data=t.data;else if(t.context!=null)h.data=this.getContextData(t.context);else if(t.image!=null)h.data=this.getImageData(t.image);else throw new Error("Invalid frame");return h},a.prototype.log=function(){var t;if(t=1<=arguments.length?o.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,t)},a}(l),r.exports=i},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(Pe);var Bt=Pe.exports;const qt=Xe(Bt);async function Ee(e){try{let f;if(e instanceof File)f=URL.createObjectURL(e);else if(typeof e=="string")f=e;else throw new Error("Invalid input: expected File object or URL string");const s=document.createElement("video");s.src=f,s.crossOrigin="anonymous",s.muted=!0,s.playsInline=!0,await new Promise((m,n)=>{s.onloadedmetadata=m,s.onerror=n});const r=document.createElement("canvas"),g=r.getContext("2d");r.width=150,r.height=150;const l=[.1,.3,.5,.7],i=[];for(const m of l){s.currentTime=s.duration*m,await new Promise(w=>{const F=()=>{s.removeEventListener("seeked",F),w()};s.addEventListener("seeked",F),setTimeout(()=>{s.removeEventListener("seeked",F),w()},1e3)}),g.fillStyle="black",g.fillRect(0,0,150,150);const n=Math.min(150/s.videoWidth,150/s.videoHeight),o=(150-s.videoWidth*n)/2,c=(150-s.videoHeight*n)/2;g.drawImage(s,0,0,s.videoWidth,s.videoHeight,o,c,s.videoWidth*n,s.videoHeight*n),i.push(g.getImageData(0,0,150,150)),console.log(`截取预览图 ${m*100}% 完成`)}const k=new qt({workers:2,quality:10,width:150,height:150});i.forEach(m=>{k.addFrame(m,{delay:500})});const x=await new Promise(m=>{k.on("finished",n=>{m(n)}),k.render()});return e instanceof File&&URL.revokeObjectURL(f),console.log("GIF预览图生成完成"),x}catch(f){return console.error("创建视频预览失败:",f),null}}const Zt={key:0,class:"space-y-4"},Gt=["href"],Qt={class:"break-all underline text-blue-500 hover:text-blue-700"},Ht={key:0},Jt=["src"],Kt={class:"break-all"},Xt={key:1},Yt={__name:"FileInfo",props:{file:{type:Object,required:!0}},emits:["fileDeleted","aliasUpdated"],setup(e,{emit:f}){const s=e,r=f,g=$(!1),l=$(s.file.alias||s.file.path),i=$(!1),k=a=>a.split(".").pop().toLowerCase(),x=a=>{switch(k(a)){case"pdf":case"doc":case"docx":case"txt":return"document";case"jpg":case"jpeg":case"png":case"gif":case"svg":return"image";case"mp4":case"avi":case"mov":return"video";case"mp3":case"wav":return"audio";case"zip":case"rar":case"7z":case"tar":case"gz":case"bz2":case"xz":return"zip";case"js":case"vue":case"py":case"java":return"code";default:return"unknown"}},m=N(()=>x(s.file.file_name)==="image"||x(s.file.file_name)==="video"),n=async a=>{g.value=!0;try{if((await Ne({fileIds:s.file.id+""})).data.success)R.success("删除成功"),r("fileDeleted",{success:!0,fileId:s.file.id}),a();else throw new Error("删除失败")}catch(t){R.error("删除失败："+t.message),r("fileDeleted",{success:!1,fileId:s.file.id,error:t.message}),a(!1)}finally{g.value=!1}},o=a=>{l.value=a},c=async()=>{i.value=!0;try{if((await xe({fileId:s.file.id,alias:l.value})).data.success)R.success("Alias saved successfully"),r("aliasUpdated",{fileId:s.file.id,newAlias:l.value});else throw new Error("Failed to save alias")}catch(a){R.error("Failed to save alias: "+a.message)}finally{i.value=!1}},w=a=>a<1024?a+" B":a<1024*1024?(a/1024).toFixed(2)+" KB":a<1024*1024*1024?(a/(1024*1024)).toFixed(2)+" MB":(a/(1024*1024*1024)).toFixed(2)+" GB",F=a=>new Date(a).toLocaleString();return(a,t)=>{const d=A("a-button"),h=A("a-input"),y=A("a-popconfirm");return b(),C("div",null,[t[11]||(t[11]=p("h2",{class:"text-xl font-bold mb-4"},"File Information",-1)),e.file?(b(),C("div",Zt,[p("a",{href:`${S(fe)}${e.file.full_path}`,target:"_blank",class:"block"},[t[1]||(t[1]=p("p",{class:"mb-1"},[p("strong",null,"Name:")],-1)),p("div",Qt,z(S(fe)+e.file.full_path),1)],8,Gt),m.value?(b(),C("div",Ht,[p("img",{src:S(fe)+(e.file.preview||e.file.full_path),alt:"file preview",class:"w-full h-auto"},null,8,Jt)])):M("",!0),p("p",null,[t[2]||(t[2]=p("strong",null,"Type:",-1)),D(" "+z(e.file.type===0?"Folder":"File"),1)]),p("p",Kt,[t[3]||(t[3]=p("strong",null,"Full Path:",-1)),D(" "+z(e.file.full_path),1)]),p("p",null,[t[4]||(t[4]=p("strong",null,"Size:",-1)),D(" "+z(w(e.file.file_size)),1)]),p("p",null,[t[5]||(t[5]=p("strong",null,"File Type:",-1)),D(" "+z(e.file.file_type),1)]),p("p",null,[t[6]||(t[6]=p("strong",null,"Created At:",-1)),D(" "+z(F(e.file.created_at)),1)]),p("p",null,[t[7]||(t[7]=p("strong",null,"Updated At:",-1)),D(" "+z(F(e.file.updated_at)),1)]),p("div",null,[t[9]||(t[9]=p("p",{class:"mb-1"},[p("strong",null,"Alias:")],-1)),_(h,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=E=>l.value=E),placeholder:"Set an alias for this file","default-value":e.file.alias||e.file.path,onChange:o},{suffix:I(()=>[_(d,{type:"text",onClick:c,loading:i.value},{default:I(()=>t[8]||(t[8]=[D(" Save ")])),_:1},8,["loading"])]),_:1},8,["modelValue","default-value"])]),_(y,{content:"确认删除此文件吗？",type:"warning","ok-loading":g.value,onBeforeOk:n},{default:I(()=>[_(d,{type:"primary",class:"mt-6"},{default:I(()=>t[10]||(t[10]=[D("删除")])),_:1})]),_:1},8,["ok-loading"])])):(b(),C("div",Xt," No file information available. "))])}}},es=X({name:"IconFile",props:{fileName:{type:String,required:!0},type:{type:Number,default:0}},setup(e){const f=r=>r.split(".").pop().toLowerCase();return{iconComponent:N(()=>{if(e.type===0)return Nt;switch(f(e.fileName)){case"pdf":case"doc":case"docx":case"txt":return Se;case"jpg":case"jpeg":case"png":case"gif":return Wt;case"mp4":case"avi":case"mov":return tt;case"mp3":case"wav":return et;case"zip":case"rar":return zt;case"js":case"vue":case"py":case"java":return wt;default:return Se}})}}});function ts(e,f,s,r,g,l){return b(),de(st(e.iconComponent))}const ss=Ye(es,[["render",ts]]),ns={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 auto-rows-auto relative"},is={class:"absolute top-2 right-2 z-10"},rs=["onClick"],os={class:"text-sm text-center truncate w-full block"},ls={__name:"ViewModeFolder",props:{fileList:{type:Array,required:!0}},emits:["folderClick","triggerFileUpload","updateSelectedFiles"],setup(e,{emit:f}){const s=f,r=$([]),g=(k,x)=>{if(x)r.value.push(k);else{const m=r.value.indexOf(k);m>-1&&r.value.splice(m,1)}console.log("selectedFiles",r.value),s("updateSelectedFiles",r.value)},l=()=>{s("triggerFileUpload")},i=(k,x,m)=>{s("folderClick",k,x,m)};return(k,x)=>{const m=A("a-checkbox");return b(),C("div",ns,[(b(!0),C(K,null,pe(e.fileList,n=>(b(),C("div",{key:n.id,class:"flex flex-col items-center p-2 border rounded cursor-pointer active:opacity-50 relative"},[p("div",is,[_(m,{"model-value":r.value.includes(n.id),onChange:o=>g(n.id,o)},null,8,["model-value","onChange"])]),p("div",{onClick:o=>i(n.type,n.full_path,n),class:"w-full h-full flex flex-col items-center justify-center"},[_(ss,{size:"24",type:n.type,fileName:n.path},null,8,["type","fileName"]),p("span",os,z(n.alias||n.path),1)],8,rs)]))),128)),p("div",{class:"flex flex-col items-center p-2 border rounded cursor-pointer active:opacity-50",onClick:l},[_(S(Ue),{size:"24",class:"mb-2"}),x[0]||(x[0]=p("span",{class:"text-sm text-center break-words"},"上传",-1))])])}}};function as(e){return(e/1024/1024).toFixed(2)+"MB"}const us="/assets/icon_folder-Dn5kCvJT.png",cs="/assets/icon_audio-Ciu7_aS0.png",ds="/assets/icon_video-CblCkkD0.png",fs="/assets/icon_pdf-C1I33Bud.png",ps="/assets/icon_txt-BTPhg_V_.png",vs="/assets/icon_zip-93NlvEmD.png",hs="data:image/png;base64,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",ms=["src"],gs=["src"],ws=["src"],ks=["src"],ys={key:3,class:"relative w-full h-full group"},bs=["src"],xs=["src"],_s=["src"],Cs=["src"],Fs=["src"],Ls=["src"],Is={__name:"IconFilePreview",props:{file:{type:Object,required:!0}},setup(e){const f=e,s=$("txt"),r=$(!1),g=i=>i.split(".").pop().toLowerCase(),l=i=>{switch(g(i)){case"pdf":case"doc":case"docx":case"txt":return"document";case"jpg":case"jpeg":case"png":case"gif":case"svg":return"image";case"mp4":case"avi":case"mov":return r.value=!0,"video";case"mp3":case"wav":return"audio";case"zip":case"rar":case"7z":case"tar":case"gz":case"bz2":case"xz":return"zip";case"js":case"vue":case"py":case"java":return"code";default:return"unknown"}};return De(()=>{s.value=l(f.file.path)}),(i,k)=>(b(),C("div",{class:G(["w-full h-full flex items-center justify-center overflow-hidden",{"bg-black flex-1":r.value}])},[e.file.type===0?(b(),C("img",{key:0,src:S(us),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,ms)):(b(),C(K,{key:1},[s.value==="image"?(b(),C("img",{key:0,src:S(je)+e.file.full_path,alt:"file preview",class:"w-full object-cover p-2"},null,8,gs)):M("",!0),s.value==="audio"?(b(),C("img",{key:1,src:S(cs),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,ws)):M("",!0),s.value==="video"&&!e.file.preview?(b(),C("img",{key:2,src:S(ds),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,ks)):M("",!0),s.value==="video"&&e.file.preview?(b(),C("div",ys,[p("img",{src:S(ut)+e.file.preview,alt:"video preview",class:"w-full h-full object-cover"},null,8,bs),p("img",{src:S(je)+e.file.preview,alt:"video preview",class:"w-full h-full object-cover absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,8,xs),k[0]||(k[0]=nt('<div class="absolute inset-0 flex items-center justify-center group-hover:opacity-0 transition-opacity duration-300"><div class="w-12 h-12 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white filter drop-shadow-md" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div>',1))])):M("",!0),s.value==="document"?(b(),C("img",{key:4,src:S(fs),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,_s)):M("",!0),s.value==="code"?(b(),C("img",{key:5,src:S(ps),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,Cs)):M("",!0),s.value==="zip"?(b(),C("img",{key:6,src:S(vs),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,Fs)):M("",!0),s.value==="unknown"?(b(),C("img",{key:7,src:S(hs),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,Ls)):M("",!0)],64))],2))}},Ss={class:"w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},$s={class:"absolute top-2 right-2 z-10"},zs=["onClick"],js={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-1 text-xs"},As={key:0,class:"text-center"},Es={__name:"ViewModePreview",props:{fileList:{type:Array,required:!0}},emits:["folderClick","triggerFileUpload","updateSelectedFiles"],setup(e,{emit:f}){const s=f,r=$([]),g=(k,x)=>{if(x)r.value.push(k);else{const m=r.value.indexOf(k);m>-1&&r.value.splice(m,1)}console.log("selectedFiles",r.value),s("updateSelectedFiles",r.value)},l=()=>{s("triggerFileUpload")},i=(k,x,m)=>{s("folderClick",k,x,m)};return(k,x)=>{const m=A("a-checkbox"),n=A("NvaTextScroll");return b(),C("div",Ss,[(b(!0),C(K,null,pe(e.fileList,o=>(b(),C("div",{key:o.id,class:"relative border rounded cursor-pointer active:opacity-50",style:{"aspect-ratio":"16/9"}},[p("div",$s,[_(m,{"model-value":r.value.includes(o.id),onChange:c=>g(o.id,c)},null,8,["model-value","onChange"])]),p("div",{onClick:c=>i(o.type,o.full_path,o),class:"w-full h-full flex flex-col items-center justify-center"},[_(Is,{file:o},null,8,["file"]),p("div",js,[_(n,{start:"hover",class:"truncate text-center"},{default:I(()=>[D(z(o.alias||o.path),1)]),_:2},1024),o.type===1&&!o.preview?(b(),C("div",As,z(S(as)(o.file_size)),1)):M("",!0)])],8,zs)]))),128)),p("div",{class:"flex flex-col items-center justify-center border rounded cursor-pointer active:opacity-50",onClick:l,style:{"aspect-ratio":"16/9"}},[_(S(Ue),{size:"24",class:"mb-2"}),x[0]||(x[0]=p("span",{class:"text-sm text-center break-words"},"上传",-1))])])}}},Us={class:"flex flex-row items-center justify-between mb-4 overflow-hidden"},Ds={class:"flex flex-row items-center hidden sm:flex"},Ns={key:2,class:"absolute inset-0 bg-blue-500 bg-opacity-50 flex items-center justify-center"},Ps={key:0,class:"text-center text-gray-500 py-4"},Ms={class:"flex justify-between items-center mb-2"},Rs={class:"text-sm font-medium text-gray-600"},Os={class:"text-xs text-gray-500"},Vs={class:"w-full bg-gray-200 h-2 rounded-full overflow-hidden"},Ts={class:"text-xs text-gray-500 mt-1 text-right"},Ws={class:"text-sm text-gray-500 mb-4"},Qs={__name:"FileList",setup(e){const f=at(),s=lt(),r=$(decodeURIComponent(s.query.dir||"/")),g=$(!1),l=$(!1),i=$(""),k=$(!1),x=$(null),m=$(!1),n=$(0),o=$(!1),c=$(null),w=ft(ct,{dir:r.value}),{list:F,refresh:a,loading:t,result:d,page:h}=w,y=N(()=>{const v=r.value.split("/").filter(Boolean);return v.map((u,j)=>({name:u,path:"/"+v.slice(0,j+1).join("/")}))}),E=v=>{f.push({query:{dir:encodeURIComponent(v)}})};De(()=>{const v=s.query.dir;v&&(r.value=decodeURIComponent(v))}),it(()=>s.query.dir,v=>{v&&(r.value=decodeURIComponent(v),a({dir:r.value,page:1}))});const U=async()=>{const v=F.value.filter(u=>O.value.includes(u.id)).map(u=>({url:fe+u.full_path,name:u.path,id:u.id}));for(const u of v){const j=await Ee(u.url);if(!j)continue;const Z=Date.now(),P=new File([j],`video_preview_${u.name}_${Z}.gif`,{type:"image/gif"}),V=await me(P,({progress:T,speed:J})=>{console.log("上传进度:",T,"上传速度:",J)},"/video_preview");await xe({fileId:u.id,alias:u.name,previewUrl:V.url})}},W=async(v,u,j)=>{v===0?await f.push({query:{dir:encodeURIComponent(u)}}):(c.value=j,g.value=!0)},q=()=>{l.value=!0},oe=async()=>{if(!/^[a-zA-Z0-9_-]+$/.test(i.value)){R.warning("文件夹名称只能包含字母、数字、下划线和横杠");return}t.value=!0;const v=await dt({dir:r.value,folder:i.value});v.data.success?(R.success("新建文件夹成功"),await a({dir:r.value})):R.error(v.data.message),t.value=!1},le=v=>{v.preventDefault(),n.value++,n.value===1&&(k.value=!0)},ae=v=>{v.preventDefault(),n.value--,n.value===0&&(k.value=!1)},Q=$e({files:[]}),{files:B}=rt(Q),ee=v=>{B.value.push($e({name:v.name,size:v.size,status:"Pending",progress:0,speed:"0 KB/s"}))},H=(v,u,j)=>{v.progress=Math.round(u),v.speed=j+"MB/s",u===100?v.status="Completed":v.status="Uploading"},te=()=>{B.value=[]},Me=async v=>{if(v.type.startsWith("video/")){const u=await Ee(v);if(!u)return null;const j=Date.now(),Z=new File([u],`video_preview_${v.name}_${j}.gif`,{type:"image/gif"}),P=await me(Z,({progress:V,speed:T})=>{console.log("上传进度:",V,"上传速度:",T)},"/video_preview");return await Ae({url:P.url,fileSize:P.fileSize,dir:"/video_preview"}),P.url}else return null},_e=async v=>{m.value=!0;try{const u=Array.from(v);u.forEach(ee);for(const j of u){const Z=await Me(j),P=B.value.find(T=>T.name===j.name);P.status="Uploading";const V=await me(j,({progress:T,speed:J})=>H(P,T,J),r.value);V.url&&(await Ae({url:V.url,previewUrl:Z,fileSize:V.fileSize,dir:r.value}),H(P,100,0))}R.success("Files uploaded successfully"),await a({dir:r.value}),setTimeout(te,2e3)}catch(u){R.error("Error uploading files"),console.error("Upload error:",u)}finally{m.value=!1}},Re=v=>{v.preventDefault(),k.value=!1,n.value=0,_e(v.dataTransfer.files)},Oe=v=>{_e(v.target.files),v.target.value=""},Ce=v=>{O.value=v},Fe=()=>{x.value.click()},Ve=async({success:v,fileId:u})=>{v&&(g.value=!1,await a({dir:r.value}))},O=$([]),se=$(!1),Te=()=>{se.value=!0},We=async()=>{try{const v=O.value.join(",");t.value=!0,await Ne({fileIds:v}),R.success(`成功删除 ${O.value.length} 个文件/文件夹`),O.value=[],await a({dir:r.value})}catch(v){R.error("批量删除失败："+v.message)}finally{se.value=!1}},ve=$(!1),he=$(""),Be=v=>{c.value=v,ve.value=!0},qe=async()=>{t.value=!0,await xe({path:r.value,alias:he.value}),t.value=!1},Ze=async({fileId:v,newAlias:u})=>{await a({dir:r.value})};return(v,u)=>{const j=A("NvaButton"),Z=A("a-space"),P=A("TitleLine"),V=A("a-breadcrumb-item"),T=A("a-breadcrumb"),J=A("a-button"),Ge=A("a-switch"),Qe=A("NvaPagination"),He=A("a-spin"),Le=A("NvaInput"),Ie=A("NvaModal"),Je=A("a-modal");return b(),C(K,null,[_(P,{title:"File List"},{right:I(()=>[_(Z,null,{default:I(()=>[_(j,{type:"primary",onClick:q},{default:I(()=>u[11]||(u[11]=[D("新建文件夹")])),_:1}),_(j,{type:"primary",danger:"",disabled:O.value.length===0,onClick:Te},{default:I(()=>[D(" 批量删除 ("+z(O.value.length)+") ",1)]),_:1},8,["disabled"]),_(j,{type:"primary",danger:"",disabled:O.value.length===0,onClick:U},{default:I(()=>[D(" 批量设置封面("+z(O.value.length)+") ",1)]),_:1},8,["disabled"])]),_:1})]),_:1}),_(He,{class:"w-full",loading:S(t)||m.value},{default:I(()=>[_(ze,null,{default:I(()=>[p("div",Us,[_(T,{class:"flex-1 min-w-0 max-w-[50%]"},{default:I(()=>[_(V,{onClick:u[0]||(u[0]=L=>E("/")),class:"truncate"},{default:I(()=>u[12]||(u[12]=[D("Root")])),_:1}),(b(!0),C(K,null,pe(y.value,(L,Ke)=>(b(),de(V,{key:Ke,onClick:Bs=>E(L.path),class:"truncate"},{default:I(()=>[D(z(L.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),p("div",Ds,[_(J,{class:"mr-4",type:"primary",size:"mini",onClick:u[1]||(u[1]=L=>S(a)({dir:r.value}))},{icon:I(()=>[_(S(Ct))]),_:1}),_(Ge,{modelValue:o.value,"onUpdate:modelValue":u[2]||(u[2]=L=>o.value=L),type:"line",size:"mini",class:"mr-4 flex-shrink-0"},{"checked-icon":I(()=>u[13]||(u[13]=[])),"unchecked-icon":I(()=>u[14]||(u[14]=[])),_:1},8,["modelValue"]),_(J,{type:"primary",size:"mini",onClick:Be,class:"flex-shrink-0"},{default:I(()=>u[15]||(u[15]=[D("设置别名")])),_:1})])]),p("div",{class:"w-full",onDragenter:ue(le,["prevent"]),onDragover:u[3]||(u[3]=ue(()=>{},["prevent"])),onDragleave:ue(ae,["prevent"]),onDrop:ue(Re,["prevent"])},[o.value?(b(),de(ls,{key:0,"file-list":S(F),onFolderClick:W,onTriggerFileUpload:Fe,onUpdateSelectedFiles:Ce},null,8,["file-list"])):(b(),de(Es,{key:1,"file-list":S(F),onFolderClick:W,onTriggerFileUpload:Fe,onUpdateSelectedFiles:Ce},null,8,["file-list"])),k.value?(b(),C("div",Ns,u[16]||(u[16]=[p("p",{class:"text-white text-xl font-bold"},"Drop files here to upload",-1)]))):M("",!0)],32),_(Qe,{hook:S(w)},null,8,["hook"])]),_:1})]),_:1},8,["loading"]),_(ze,{class:"mt-6"},{default:I(()=>[u[17]||(u[17]=p("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"待上传文件列表",-1)),S(B).length===0?(b(),C("div",Ps," 暂无待上传文件 ")):(b(!0),C(K,{key:1},pe(S(B),L=>(b(),C("div",{key:L.name,class:"mb-4"},[p("div",Ms,[p("span",Rs,z(L.name),1),p("span",{class:G(["text-xs font-semibold px-2 py-1 rounded-full",{"bg-blue-100 text-blue-800":L.status==="uploading","bg-green-100 text-green-800":L.status==="completed","bg-red-100 text-red-800":L.status==="error"}])},[D(z(L.status)+" ",1),p("span",Os,z(L.speed),1)],2)]),p("div",Vs,[p("div",{class:"bg-blue-500 h-full transition-all duration-300 ease-in-out",style:Y({width:`${L.progress}%`})},null,4)]),p("div",Ts,z(L.progress)+"% ",1)]))),128))]),_:1}),p("input",{type:"file",ref_key:"fileInput",ref:x,onChange:Oe,style:{display:"none"},multiple:""},null,544),_(Ie,{modelValue:l.value,"onUpdate:modelValue":u[5]||(u[5]=L=>l.value=L),title:"新建文件夹",onOk:oe},{default:I(()=>[p("div",Ws,"当前目录："+z(r.value),1),_(Le,{modelValue:i.value,"onUpdate:modelValue":u[4]||(u[4]=L=>i.value=L),placeholder:"请输入文件夹名称"},null,8,["modelValue"])]),_:1},8,["modelValue"]),_(Ie,{modelValue:ve.value,"onUpdate:modelValue":u[7]||(u[7]=L=>ve.value=L),title:"设置别名",onOk:qe},{default:I(()=>[_(Le,{modelValue:he.value,"onUpdate:modelValue":u[6]||(u[6]=L=>he.value=L),placeholder:"请输入别名"},null,8,["modelValue"])]),_:1},8,["modelValue"]),_(ot,{visible:g.value,"onUpdate:visible":u[8]||(u[8]=L=>g.value=L)},{default:I(()=>[_(Yt,{file:c.value,onFileDeleted:Ve,onAliasUpdated:Ze},null,8,["file"])]),_:1},8,["visible"]),_(Je,{visible:se.value,"onUpdate:visible":u[9]||(u[9]=L=>se.value=L),title:"确认批量删除",onOk:We,onCancel:u[10]||(u[10]=L=>se.value=!1)},{default:I(()=>[p("p",null,"确定要删除选中的 "+z(O.value.length)+" 个文件/文件夹吗？此操作不可撤销。",1)]),_:1},8,["visible"])],64)}}};export{Qs as default};
