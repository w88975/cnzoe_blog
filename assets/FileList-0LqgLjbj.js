import{_ as de,d as te,g as fe,c as R,i as pe,o as b,a as C,n as K,b as se,e as h,H as Ke,r as z,h as j,t as A,u as S,l as N,v as D,j as _,w as I,M as P,m as Xe,I as Ie,J as Ye,K as et,q as ae,L as tt,F as J,k as ce,N as Ue,f as $e,O as st,C as nt,p as Se,P as it,B as ze,Q as rt,y as ot,R as oe,s as lt}from"./index-UcIYAiGq.js";import{O as ue,d as De,a as xe,b as Ae,c as at,g as ut,e as ct,u as me,s as je}from"./config-BGylsl7I.js";import{u as dt}from"./useList-BOfLZEsI.js";import{I as ft}from"./index-BQl7DG-4.js";import"./index-BrOi-VLQ.js";const pt=te({name:"IconCode",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:f}){const s=fe("icon"),r=R(()=>[s,`${s}-code`,{[`${s}-spin`]:e.spin}]),g=R(()=>{const i={};return e.size&&(i.fontSize=pe(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:r,innerStyle:g,onClick:i=>{f("click",i)}}}}),vt=["stroke-width","stroke-linecap","stroke-linejoin"],ht=h("path",{d:"M16.734 12.686 5.42 24l11.314 11.314m14.521-22.628L42.57 24 31.255 35.314M27.2 6.28l-6.251 35.453"},null,-1),mt=[ht];function gt(e,f,s,r,g,c){return b(),C("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:K(e.cls),style:se(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},mt,14,vt)}var ge=de(pt,[["render",gt]]);const wt=Object.assign(ge,{install:(e,f)=>{var s;const r=(s=f==null?void 0:f.iconPrefix)!=null?s:"";e.component(r+ge.name,ge)}}),kt=te({name:"IconRefresh",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:f}){const s=fe("icon"),r=R(()=>[s,`${s}-refresh`,{[`${s}-spin`]:e.spin}]),g=R(()=>{const i={};return e.size&&(i.fontSize=pe(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:r,innerStyle:g,onClick:i=>{f("click",i)}}}}),yt=["stroke-width","stroke-linecap","stroke-linejoin"],xt=h("path",{d:"M38.837 18C36.463 12.136 30.715 8 24 8 15.163 8 8 15.163 8 24s7.163 16 16 16c7.455 0 13.72-5.1 15.496-12M40 8v10H30"},null,-1),bt=[xt];function _t(e,f,s,r,g,c){return b(),C("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:K(e.cls),style:se(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},bt,14,yt)}var we=de(kt,[["render",_t]]);const Ct=Object.assign(we,{install:(e,f)=>{var s;const r=(s=f==null?void 0:f.iconPrefix)!=null?s:"";e.component(r+we.name,we)}}),Ft=te({name:"IconCommon",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:f}){const s=fe("icon"),r=R(()=>[s,`${s}-common`,{[`${s}-spin`]:e.spin}]),g=R(()=>{const i={};return e.size&&(i.fontSize=pe(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:r,innerStyle:g,onClick:i=>{f("click",i)}}}}),Lt=["stroke-width","stroke-linecap","stroke-linejoin"],It=h("path",{d:"M24 23 7.652 14.345M24 23l16.366-8.664M24 23v19.438M7 14v20l17 9 17-9V14L24 5 7 14Z"},null,-1),St=[It];function zt(e,f,s,r,g,c){return b(),C("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:K(e.cls),style:se(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},St,14,Lt)}var ke=de(Ft,[["render",zt]]);const At=Object.assign(ke,{install:(e,f)=>{var s;const r=(s=f==null?void 0:f.iconPrefix)!=null?s:"";e.component(r+ke.name,ke)}}),jt=te({name:"IconFolder",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:f}){const s=fe("icon"),r=R(()=>[s,`${s}-folder`,{[`${s}-spin`]:e.spin}]),g=R(()=>{const i={};return e.size&&(i.fontSize=pe(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:r,innerStyle:g,onClick:i=>{f("click",i)}}}}),Et=["stroke-width","stroke-linecap","stroke-linejoin"],Ut=h("path",{d:"M6 13h18l-2.527-3.557a1.077 1.077 0 0 0-.88-.443H7.06C6.474 9 6 9.448 6 10v3Zm0 0h33.882c1.17 0 2.118.895 2.118 2v21c0 1.105-.948 3-2.118 3H8.118C6.948 39 6 38.105 6 37V13Z"},null,-1),$t=[Ut];function Dt(e,f,s,r,g,c){return b(),C("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:K(e.cls),style:se(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},$t,14,Et)}var ye=de(jt,[["render",Dt]]);const Nt=Object.assign(ye,{install:(e,f)=>{var s;const r=(s=f==null?void 0:f.iconPrefix)!=null?s:"";e.component(r+ye.name,ye)}});function le(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ne={exports:{}};(function(e,f){(function(s){e.exports=s()})(function(){return function s(r,g,c){function i(m,n){if(!g[m]){if(!r[m]){var o=typeof le=="function"&&le;if(!n&&o)return o(m,!0);if(k)return k(m,!0);var a=new Error("Cannot find module '"+m+"'");throw a.code="MODULE_NOT_FOUND",a}var w=g[m]={exports:{}};r[m][0].call(w.exports,function(F){var l=r[m][1][F];return i(l||F)},w,w.exports,s,r,g,c)}return g[m].exports}for(var k=typeof le=="function"&&le,x=0;x<c.length;x++)i(c[x]);return i}({1:[function(s,r,g){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}r.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(n){if(!k(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},c.prototype.emit=function(n){var o,a,w,F,l,t;if(this._events||(this._events={}),n==="error"&&(!this._events.error||x(this._events.error)&&!this._events.error.length)){if(o=arguments[1],o instanceof Error)throw o;var d=new Error('Uncaught, unspecified "error" event. ('+o+")");throw d.context=o,d}if(a=this._events[n],m(a))return!1;if(i(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:F=Array.prototype.slice.call(arguments,1),a.apply(this,F)}else if(x(a))for(F=Array.prototype.slice.call(arguments,1),t=a.slice(),w=t.length,l=0;l<w;l++)t[l].apply(this,F);return!0},c.prototype.addListener=function(n,o){var a;if(!i(o))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,i(o.listener)?o.listener:o),this._events[n]?x(this._events[n])?this._events[n].push(o):this._events[n]=[this._events[n],o]:this._events[n]=o,x(this._events[n])&&!this._events[n].warned&&(m(this._maxListeners)?a=c.defaultMaxListeners:a=this._maxListeners,a&&a>0&&this._events[n].length>a&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),typeof console.trace=="function"&&console.trace())),this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(n,o){if(!i(o))throw TypeError("listener must be a function");var a=!1;function w(){this.removeListener(n,w),a||(a=!0,o.apply(this,arguments))}return w.listener=o,this.on(n,w),this},c.prototype.removeListener=function(n,o){var a,w,F,l;if(!i(o))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(a=this._events[n],F=a.length,w=-1,a===o||i(a.listener)&&a.listener===o)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,o);else if(x(a)){for(l=F;l-- >0;)if(a[l]===o||a[l].listener&&a[l].listener===o){w=l;break}if(w<0)return this;a.length===1?(a.length=0,delete this._events[n]):a.splice(w,1),this._events.removeListener&&this.emit("removeListener",n,o)}return this},c.prototype.removeAllListeners=function(n){var o,a;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[n]&&delete this._events[n],this;if(arguments.length===0){for(o in this._events)o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events={},this}if(a=this._events[n],i(a))this.removeListener(n,a);else if(a)for(;a.length;)this.removeListener(n,a[a.length-1]);return delete this._events[n],this},c.prototype.listeners=function(n){var o;return!this._events||!this._events[n]?o=[]:i(this._events[n])?o=[this._events[n]]:o=this._events[n].slice(),o},c.prototype.listenerCount=function(n){if(this._events){var o=this._events[n];if(i(o))return 1;if(o)return o.length}return 0},c.listenerCount=function(n,o){return n.listenerCount(o)};function i(n){return typeof n=="function"}function k(n){return typeof n=="number"}function x(n){return typeof n=="object"&&n!==null}function m(n){return n===void 0}},{}],2:[function(s,r,g){var c,i,k,x,m;m=navigator.userAgent.toLowerCase(),x=navigator.platform.toLowerCase(),c=m.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],k=c[1]==="ie"&&document.documentMode,i={name:c[1]==="version"?c[3]:c[1],version:k||parseFloat(c[1]==="opera"&&c[4]?c[4]:c[2]),platform:{name:m.match(/ip(?:ad|od|hone)/)?"ios":(m.match(/(?:webos|android)/)||x.match(/mac|win|linux/)||["other"])[0]}},i[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.platform[i.platform.name]=!0,r.exports=i},{}],3:[function(s,r,g){var c,i,k,x=function(a,w){for(var F in w)m.call(w,F)&&(a[F]=w[F]);function l(){this.constructor=a}return l.prototype=w.prototype,a.prototype=new l,a.__super__=w.prototype,a},m={}.hasOwnProperty,n=[].indexOf||function(a){for(var w=0,F=this.length;w<F;w++)if(w in this&&this[w]===a)return w;return-1},o=[].slice;c=s("events").EventEmitter,k=s("./browser.coffee"),i=function(a){var w,F;x(l,a),w={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},F={delay:500,copy:!1};function l(t){var d,v,y;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t);for(v in w)y=w[v],(d=this.options)[v]==null&&(d[v]=y)}return l.prototype.setOption=function(t,d){if(this.options[t]=d,this._canvas!=null&&(t==="width"||t==="height"))return this._canvas[t]=d},l.prototype.setOptions=function(t){var d,v,y;v=[];for(d in t)m.call(t,d)&&(y=t[d],v.push(this.setOption(d,y)));return v},l.prototype.addFrame=function(t,d){var v,y;d==null&&(d={}),v={},v.transparent=this.options.transparent;for(y in F)v[y]=d[y]||F[y];if(this.options.width==null&&this.setOption("width",t.width),this.options.height==null&&this.setOption("height",t.height),typeof ImageData<"u"&&ImageData!==null&&t instanceof ImageData)v.data=t.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&t instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&t instanceof WebGLRenderingContext)d.copy?v.data=this.getContextData(t):v.context=t;else if(t.childNodes!=null)d.copy?v.data=this.getImageData(t):v.image=t;else throw new Error("Invalid image");return this.frames.push(v)},l.prototype.render=function(){var t,d,v;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var y,E,$;for($=[],y=0,E=this.frames.length;0<=E?y<E:y>E;0<=E?++y:--y)$.push(null);return $}).call(this),d=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(t=0,v=d;0<=v?t<v:t>v;0<=v?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},l.prototype.abort=function(){for(var t;t=this.activeWorkers.shift(),t!=null;)this.log("killing active worker"),t.terminate();return this.running=!1,this.emit("abort")},l.prototype.spawnWorkers=function(){var t,d,v;return t=Math.min(this.options.workers,this.frames.length),(function(){v=[];for(var y=d=this.freeWorkers.length;d<=t?y<t:y>t;d<=t?y++:y--)v.push(y);return v}).apply(this).forEach(function(y){return function(E){var $;return y.log("spawning worker "+E),$=new Worker(y.options.workerScript),$.onmessage=function(W){return y.activeWorkers.splice(y.activeWorkers.indexOf($),1),y.freeWorkers.push($),y.frameFinished(W.data)},y.freeWorkers.push($)}}(this)),t},l.prototype.frameFinished=function(t){var d,v;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,this.options.globalPalette===!0&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(d=1,v=this.freeWorkers.length;1<=v?d<v:d>v;1<=v?++d:--d)this.renderNextFrame();return n.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},l.prototype.finishRendering=function(){var t,d,v,y,E,$,W,q,ne,ie,re,Z,B,X,Q,Y;for(q=0,X=this.imageParts,E=0,ne=X.length;E<ne;E++)d=X[E],q+=(d.data.length-1)*d.pageSize+d.cursor;for(q+=d.pageSize-d.cursor,this.log("rendering finished - filesize "+Math.round(q/1e3)+"kb"),t=new Uint8Array(q),Z=0,Q=this.imageParts,$=0,ie=Q.length;$<ie;$++)for(d=Q[$],Y=d.data,v=W=0,re=Y.length;W<re;v=++W)B=Y[v],t.set(B,Z),v===d.data.length-1?Z+=d.cursor:Z+=d.pageSize;return y=new Blob([t],{type:"image/gif"}),this.emit("finished",y,t)},l.prototype.renderNextFrame=function(){var t,d,v;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],v=this.freeWorkers.shift(),d=this.getTask(t),this.log("starting frame "+(d.index+1)+" of "+this.frames.length),this.activeWorkers.push(v),v.postMessage(d)},l.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},l.prototype.getImageData=function(t){var d;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),d=this._canvas.getContext("2d"),d.setFill=this.options.background,d.fillRect(0,0,this.options.width,this.options.height),d.drawImage(t,0,0),this.getContextData(d)},l.prototype.getTask=function(t){var d,v;if(d=this.frames.indexOf(t),v={index:d,last:d===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:k.name==="chrome"},t.data!=null)v.data=t.data;else if(t.context!=null)v.data=this.getContextData(t.context);else if(t.image!=null)v.data=this.getImageData(t.image);else throw new Error("Invalid frame");return v},l.prototype.log=function(){var t;if(t=1<=arguments.length?o.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,t)},l}(c),r.exports=i},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(Ne);var Pt=Ne.exports;const Rt=Ke(Pt);async function Ee(e){try{let f;if(e instanceof File)f=URL.createObjectURL(e);else if(typeof e=="string")f=e;else throw new Error("Invalid input: expected File object or URL string");const s=document.createElement("video");s.src=f,s.crossOrigin="anonymous",s.muted=!0,s.playsInline=!0,await new Promise((m,n)=>{s.onloadedmetadata=m,s.onerror=n});const r=document.createElement("canvas"),g=r.getContext("2d");r.width=150,r.height=150;const c=[.1,.3,.5,.7],i=[];for(const m of c){s.currentTime=s.duration*m,await new Promise(w=>{const F=()=>{s.removeEventListener("seeked",F),w()};s.addEventListener("seeked",F),setTimeout(()=>{s.removeEventListener("seeked",F),w()},1e3)}),g.fillStyle="black",g.fillRect(0,0,150,150);const n=Math.min(150/s.videoWidth,150/s.videoHeight),o=(150-s.videoWidth*n)/2,a=(150-s.videoHeight*n)/2;g.drawImage(s,0,0,s.videoWidth,s.videoHeight,o,a,s.videoWidth*n,s.videoHeight*n),i.push(g.getImageData(0,0,150,150)),console.log(`截取预览图 ${m*100}% 完成`)}const k=new Rt({workers:2,quality:10,width:150,height:150});i.forEach(m=>{k.addFrame(m,{delay:500})});const x=await new Promise(m=>{k.on("finished",n=>{m(n)}),k.render()});return e instanceof File&&URL.revokeObjectURL(f),console.log("GIF预览图生成完成"),x}catch(f){return console.error("创建视频预览失败:",f),null}}const Ot={key:0,class:"space-y-4"},Mt=["href"],Vt={class:"break-all underline text-blue-500 hover:text-blue-700"},Tt={key:0},Wt=["src"],Bt={class:"break-all"},qt={key:1},Gt={__name:"FileInfo",props:{file:{type:Object,required:!0}},emits:["fileDeleted","aliasUpdated"],setup(e,{emit:f}){const s=e,r=f,g=z(!1),c=z(s.file.alias||s.file.path),i=z(!1),k=l=>l.split(".").pop().toLowerCase(),x=l=>{switch(k(l)){case"pdf":case"doc":case"docx":case"txt":return"document";case"jpg":case"jpeg":case"png":case"gif":case"svg":return"image";case"mp4":case"avi":case"mov":return"video";case"mp3":case"wav":return"audio";case"zip":case"rar":case"7z":case"tar":case"gz":case"bz2":case"xz":return"zip";case"js":case"vue":case"py":case"java":return"code";default:return"unknown"}},m=R(()=>x(s.file.file_name)==="image"||x(s.file.file_name)==="video"),n=async l=>{g.value=!0;try{if((await De({fileIds:s.file.id+""})).data.success)P.success("删除成功"),r("fileDeleted",{success:!0,fileId:s.file.id}),l();else throw new Error("删除失败")}catch(t){P.error("删除失败："+t.message),r("fileDeleted",{success:!1,fileId:s.file.id,error:t.message}),l(!1)}finally{g.value=!1}},o=l=>{c.value=l},a=async()=>{i.value=!0;try{if((await xe({fileId:s.file.id,alias:c.value})).data.success)P.success("Alias saved successfully"),r("aliasUpdated",{fileId:s.file.id,newAlias:c.value});else throw new Error("Failed to save alias")}catch(l){P.error("Failed to save alias: "+l.message)}finally{i.value=!1}},w=l=>l<1024?l+" B":l<1024*1024?(l/1024).toFixed(2)+" KB":l<1024*1024*1024?(l/(1024*1024)).toFixed(2)+" MB":(l/(1024*1024*1024)).toFixed(2)+" GB",F=l=>new Date(l).toLocaleString();return(l,t)=>{const d=j("a-button"),v=j("a-input"),y=j("a-popconfirm");return b(),C("div",null,[t[11]||(t[11]=h("h2",{class:"text-xl font-bold mb-4"},"File Information",-1)),e.file?(b(),C("div",Ot,[h("a",{href:`${S(ue)}${e.file.full_path}`,target:"_blank",class:"block"},[t[1]||(t[1]=h("p",{class:"mb-1"},[h("strong",null,"Name:")],-1)),h("div",Vt,A(S(ue)+e.file.full_path),1)],8,Mt),m.value?(b(),C("div",Tt,[h("img",{src:S(ue)+(e.file.preview||e.file.full_path),alt:"file preview",class:"w-full h-auto"},null,8,Wt)])):N("",!0),h("p",null,[t[2]||(t[2]=h("strong",null,"Type:",-1)),D(" "+A(e.file.type===0?"Folder":"File"),1)]),h("p",Bt,[t[3]||(t[3]=h("strong",null,"Full Path:",-1)),D(" "+A(e.file.full_path),1)]),h("p",null,[t[4]||(t[4]=h("strong",null,"Size:",-1)),D(" "+A(w(e.file.file_size)),1)]),h("p",null,[t[5]||(t[5]=h("strong",null,"File Type:",-1)),D(" "+A(e.file.file_type),1)]),h("p",null,[t[6]||(t[6]=h("strong",null,"Created At:",-1)),D(" "+A(F(e.file.created_at)),1)]),h("p",null,[t[7]||(t[7]=h("strong",null,"Updated At:",-1)),D(" "+A(F(e.file.updated_at)),1)]),h("div",null,[t[9]||(t[9]=h("p",{class:"mb-1"},[h("strong",null,"Alias:")],-1)),_(v,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=E=>c.value=E),placeholder:"Set an alias for this file","default-value":e.file.alias||e.file.path,onChange:o},{suffix:I(()=>[_(d,{type:"text",onClick:a,loading:i.value},{default:I(()=>t[8]||(t[8]=[D(" Save ")])),_:1},8,["loading"])]),_:1},8,["modelValue","default-value"])]),_(y,{content:"确认删除此文件吗？",type:"warning","ok-loading":g.value,onBeforeOk:n},{default:I(()=>[_(d,{type:"primary",class:"mt-6"},{default:I(()=>t[10]||(t[10]=[D("删除")])),_:1})]),_:1},8,["ok-loading"])])):(b(),C("div",qt," No file information available. "))])}}},Zt=te({name:"IconFile",props:{fileName:{type:String,required:!0},type:{type:Number,default:0}},setup(e){const f=r=>r.split(".").pop().toLowerCase();return{iconComponent:R(()=>{if(e.type===0)return Nt;switch(f(e.fileName)){case"pdf":case"doc":case"docx":case"txt":return Ie;case"jpg":case"jpeg":case"png":case"gif":return ft;case"mp4":case"avi":case"mov":return et;case"mp3":case"wav":return Ye;case"zip":case"rar":return At;case"js":case"vue":case"py":case"java":return wt;default:return Ie}})}}});function Qt(e,f,s,r,g,c){return b(),ae(tt(e.iconComponent))}const Ht=Xe(Zt,[["render",Qt]]),Jt={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 auto-rows-auto relative"},Kt={class:"absolute top-2 right-2 z-10"},Xt=["onClick"],Yt={class:"text-sm text-center truncate w-full block"},es={__name:"ViewModeFolder",props:{fileList:{type:Array,required:!0}},emits:["folderClick","triggerFileUpload","updateSelectedFiles"],setup(e,{emit:f}){const s=f,r=z([]),g=(k,x)=>{if(x)r.value.push(k);else{const m=r.value.indexOf(k);m>-1&&r.value.splice(m,1)}console.log("selectedFiles",r.value),s("updateSelectedFiles",r.value)},c=()=>{s("triggerFileUpload")},i=(k,x,m)=>{s("folderClick",k,x,m)};return(k,x)=>{const m=j("a-checkbox");return b(),C("div",Jt,[(b(!0),C(J,null,ce(e.fileList,n=>(b(),C("div",{key:n.id,class:"flex flex-col items-center p-2 border rounded cursor-pointer active:opacity-50 relative"},[h("div",Kt,[_(m,{"model-value":r.value.includes(n.id),onChange:o=>g(n.id,o)},null,8,["model-value","onChange"])]),h("div",{onClick:o=>i(n.type,n.full_path,n),class:"w-full h-full flex flex-col items-center justify-center"},[_(Ht,{size:"24",type:n.type,fileName:n.path},null,8,["type","fileName"]),h("span",Yt,A(n.alias||n.path),1)],8,Xt)]))),128)),h("div",{class:"flex flex-col items-center p-2 border rounded cursor-pointer active:opacity-50",onClick:c},[_(S(Ue),{size:"24",class:"mb-2"}),x[0]||(x[0]=h("span",{class:"text-sm text-center break-words"},"上传",-1))])])}}};function ts(e){return(e/1024/1024).toFixed(2)+"MB"}const ss="/assets/icon_folder-Dn5kCvJT.png",ns="/assets/icon_audio-Ciu7_aS0.png",is="/assets/icon_video-CblCkkD0.png",rs="/assets/icon_pdf-C1I33Bud.png",os="/assets/icon_txt-BTPhg_V_.png",ls="/assets/icon_zip-93NlvEmD.png",as="data:image/png;base64,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",us=["src"],cs=["src"],ds=["src"],fs=["src"],ps={key:3,class:"relative w-full h-full group"},vs=["src"],hs=["src"],ms=["src"],gs=["src"],ws=["src"],ks=["src"],ys={__name:"IconFilePreview",props:{file:{type:Object,required:!0}},setup(e){const f=e,s=z("txt"),r=z(!1),g=i=>i.split(".").pop().toLowerCase(),c=i=>{switch(g(i)){case"pdf":case"doc":case"docx":case"txt":return"document";case"jpg":case"jpeg":case"png":case"gif":case"svg":return"image";case"mp4":case"avi":case"mov":return r.value=!0,"video";case"mp3":case"wav":return"audio";case"zip":case"rar":case"7z":case"tar":case"gz":case"bz2":case"xz":return"zip";case"js":case"vue":case"py":case"java":return"code";default:return"unknown"}};return $e(()=>{s.value=c(f.file.path)}),(i,k)=>(b(),C("div",{class:K(["w-full h-full flex items-center justify-center overflow-hidden",{"bg-black flex-1":r.value}])},[e.file.type===0?(b(),C("img",{key:0,src:S(ss),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,us)):(b(),C(J,{key:1},[s.value==="image"?(b(),C("img",{key:0,src:S(Ae)+e.file.full_path,alt:"file preview",class:"w-full object-cover p-2"},null,8,cs)):N("",!0),s.value==="audio"?(b(),C("img",{key:1,src:S(ns),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,ds)):N("",!0),s.value==="video"&&!e.file.preview?(b(),C("img",{key:2,src:S(is),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,fs)):N("",!0),s.value==="video"&&e.file.preview?(b(),C("div",ps,[h("img",{src:S(at)+e.file.preview,alt:"video preview",class:"w-full h-full object-cover"},null,8,vs),h("img",{src:S(Ae)+e.file.preview,alt:"video preview",class:"w-full h-full object-cover absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,8,hs),k[0]||(k[0]=st('<div class="absolute inset-0 flex items-center justify-center group-hover:opacity-0 transition-opacity duration-300"><div class="w-12 h-12 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white filter drop-shadow-md" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div>',1))])):N("",!0),s.value==="document"?(b(),C("img",{key:4,src:S(rs),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,ms)):N("",!0),s.value==="code"?(b(),C("img",{key:5,src:S(os),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,gs)):N("",!0),s.value==="zip"?(b(),C("img",{key:6,src:S(ls),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,ws)):N("",!0),s.value==="unknown"?(b(),C("img",{key:7,src:S(as),alt:"file preview",class:"w-auto h-full object-cover p-2"},null,8,ks)):N("",!0)],64))],2))}},xs={class:"w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},bs={class:"absolute top-2 right-2 z-10"},_s=["onClick"],Cs={class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-1 text-xs"},Fs={key:0,class:"text-center"},Ls={__name:"ViewModePreview",props:{fileList:{type:Array,required:!0}},emits:["folderClick","triggerFileUpload","updateSelectedFiles"],setup(e,{emit:f}){const s=f,r=z([]),g=(k,x)=>{if(x)r.value.push(k);else{const m=r.value.indexOf(k);m>-1&&r.value.splice(m,1)}console.log("selectedFiles",r.value),s("updateSelectedFiles",r.value)},c=()=>{s("triggerFileUpload")},i=(k,x,m)=>{s("folderClick",k,x,m)};return(k,x)=>{const m=j("a-checkbox"),n=j("NvaTextScroll");return b(),C("div",xs,[(b(!0),C(J,null,ce(e.fileList,o=>(b(),C("div",{key:o.id,class:"relative border rounded cursor-pointer active:opacity-50",style:{"aspect-ratio":"16/9"}},[h("div",bs,[_(m,{"model-value":r.value.includes(o.id),onChange:a=>g(o.id,a)},null,8,["model-value","onChange"])]),h("div",{onClick:a=>i(o.type,o.full_path,o),class:"w-full h-full flex flex-col items-center justify-center"},[_(ys,{file:o},null,8,["file"]),h("div",Cs,[_(n,{start:"hover",class:"truncate text-center"},{default:I(()=>[D(A(o.alias||o.path),1)]),_:2},1024),o.type===1&&!o.preview?(b(),C("div",Fs,A(S(ts)(o.file_size)),1)):N("",!0)])],8,_s)]))),128)),h("div",{class:"flex flex-col items-center justify-center border rounded cursor-pointer active:opacity-50",onClick:c,style:{"aspect-ratio":"16/9"}},[_(S(Ue),{size:"24",class:"mb-2"}),x[0]||(x[0]=h("span",{class:"text-sm text-center break-words"},"上传",-1))])])}}},Is={class:"flex flex-row items-center justify-between mb-4 overflow-hidden"},Ss={class:"flex flex-row items-center hidden sm:flex"},zs={key:2,class:"absolute inset-0 bg-blue-500 bg-opacity-50 flex items-center justify-center"},As={key:0,class:"text-center text-gray-500 py-4"},js={class:"flex justify-between items-center mb-2"},Es={class:"text-sm font-medium text-gray-600"},Us={class:"text-xs text-gray-500"},$s={class:"w-full bg-gray-200 h-2 rounded-full overflow-hidden"},Ds={class:"text-xs text-gray-500 mt-1 text-right"},Ns={class:"text-sm text-gray-500 mb-4"},Ws={__name:"FileList",setup(e){const f=lt(),s=ot(),r=z(decodeURIComponent(s.query.dir||"/")),g=z(!1),c=z(!1),i=z(""),k=z(!1),x=z(null),m=z(!1),n=z(0),o=z(!1),a=z(null),w=dt(ut,{dir:r.value}),{list:F,refresh:l,loading:t,result:d,page:v}=w,y=R(()=>{const p=r.value.split("/").filter(Boolean);return p.map((u,U)=>({name:u,path:"/"+p.slice(0,U+1).join("/")}))}),E=p=>{f.push({query:{dir:encodeURIComponent(p)}})};$e(()=>{const p=s.query.dir;p&&(r.value=decodeURIComponent(p))}),nt(()=>s.query.dir,p=>{p&&(r.value=decodeURIComponent(p),l({dir:r.value,page:1}))});const $=async()=>{const p=F.value.filter(u=>O.value.includes(u.id)).map(u=>({url:ue+u.full_path,name:u.path,id:u.id}));for(const u of p){const U=await Ee(u.url),V=Date.now(),T=new File([U],`video_preview_${u.name}_${V}.gif`,{type:"image/gif"}),M=await me(T,({progress:G,speed:H})=>{console.log("上传进度:",G,"上传速度:",H)},"/video_preview");await xe({fileId:u.id,alias:u.name,previewUrl:M.url})}},W=async(p,u,U)=>{p===0?await f.push({query:{dir:encodeURIComponent(u)}}):(a.value=U,g.value=!0)},q=()=>{c.value=!0},ne=async()=>{if(!/^[a-zA-Z0-9_-]+$/.test(i.value)){P.warning("文件夹名称只能包含字母、数字、下划线和横杠");return}t.value=!0;const p=await ct({dir:r.value,folder:i.value});p.data.success?(P.success("新建文件夹成功"),await l({dir:r.value})):P.error(p.data.message),t.value=!1},ie=p=>{p.preventDefault(),n.value++,n.value===1&&(k.value=!0)},re=p=>{p.preventDefault(),n.value--,n.value===0&&(k.value=!1)},Z=Se({files:[]}),{files:B}=it(Z),X=p=>{B.value.push(Se({name:p.name,size:p.size,status:"Pending",progress:0,speed:"0 KB/s"}))},Q=(p,u,U)=>{p.progress=Math.round(u),p.speed=U+"MB/s",u===100?p.status="Completed":p.status="Uploading"},Y=()=>{B.value=[]},Pe=async p=>{if(p.type.startsWith("video/")){const u=await Ee(p),U=new File([u],`video_preview_${p.name}.gif`,{type:"image/gif"}),V=await me(U,({progress:T,speed:M})=>{console.log("上传进度:",T,"上传速度:",M)},"/video_preview");return await je({url:V.url,fileSize:V.fileSize,dir:"/video_preview"}),V.url}else return null},be=async p=>{m.value=!0;try{const u=Array.from(p);u.forEach(X);for(const U of u){const V=await Pe(U),T=B.value.find(G=>G.name===U.name);T.status="Uploading";const M=await me(U,({progress:G,speed:H})=>Q(T,G,H),r.value);M.url&&(await je({url:M.url,previewUrl:V,fileSize:M.fileSize,dir:r.value}),Q(T,100,0))}P.success("Files uploaded successfully"),await l({dir:r.value}),setTimeout(Y,2e3)}catch(u){P.error("Error uploading files"),console.error("Upload error:",u)}finally{m.value=!1}},Re=p=>{p.preventDefault(),k.value=!1,n.value=0,be(p.dataTransfer.files)},Oe=p=>{be(p.target.files),p.target.value=""},_e=p=>{O.value=p},Ce=()=>{x.value.click()},Me=async({success:p,fileId:u})=>{p&&(g.value=!1,await l({dir:r.value}))},O=z([]),ee=z(!1),Ve=()=>{ee.value=!0},Te=async()=>{try{const p=O.value.join(",");t.value=!0,await De({fileIds:p}),P.success(`成功删除 ${O.value.length} 个文件/文件夹`),O.value=[],await l({dir:r.value})}catch(p){P.error("批量删除失败："+p.message)}finally{ee.value=!1}},ve=z(!1),he=z(""),We=p=>{a.value=p,ve.value=!0},Be=async()=>{t.value=!0,await xe({path:r.value,alias:he.value}),t.value=!1},qe=async({fileId:p,newAlias:u})=>{await l({dir:r.value})};return(p,u)=>{const U=j("NvaButton"),V=j("a-space"),T=j("TitleLine"),M=j("a-breadcrumb-item"),G=j("a-breadcrumb"),H=j("a-button"),Ge=j("a-switch"),Ze=j("NvaPagination"),Qe=j("a-spin"),Fe=j("NvaInput"),Le=j("NvaModal"),He=j("a-modal");return b(),C(J,null,[_(T,{title:"File List"},{right:I(()=>[_(V,null,{default:I(()=>[_(U,{type:"primary",onClick:q},{default:I(()=>u[11]||(u[11]=[D("新建文件夹")])),_:1}),_(U,{type:"primary",danger:"",disabled:O.value.length===0,onClick:Ve},{default:I(()=>[D(" 批量删除 ("+A(O.value.length)+") ",1)]),_:1},8,["disabled"]),_(U,{type:"primary",danger:"",disabled:O.value.length===0,onClick:$},{default:I(()=>[D(" 批量设置封面("+A(O.value.length)+") ",1)]),_:1},8,["disabled"])]),_:1})]),_:1}),_(Qe,{class:"w-full",loading:S(t)||m.value},{default:I(()=>[_(ze,null,{default:I(()=>[h("div",Is,[_(G,{class:"flex-1 min-w-0 max-w-[50%]"},{default:I(()=>[_(M,{onClick:u[0]||(u[0]=L=>E("/")),class:"truncate"},{default:I(()=>u[12]||(u[12]=[D("Root")])),_:1}),(b(!0),C(J,null,ce(y.value,(L,Je)=>(b(),ae(M,{key:Je,onClick:Ps=>E(L.path),class:"truncate"},{default:I(()=>[D(A(L.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),h("div",Ss,[_(H,{class:"mr-4",type:"primary",size:"mini",onClick:u[1]||(u[1]=L=>S(l)({dir:r.value}))},{icon:I(()=>[_(S(Ct))]),_:1}),_(Ge,{modelValue:o.value,"onUpdate:modelValue":u[2]||(u[2]=L=>o.value=L),type:"line",size:"mini",class:"mr-4 flex-shrink-0"},{"checked-icon":I(()=>u[13]||(u[13]=[])),"unchecked-icon":I(()=>u[14]||(u[14]=[])),_:1},8,["modelValue"]),_(H,{type:"primary",size:"mini",onClick:We,class:"flex-shrink-0"},{default:I(()=>u[15]||(u[15]=[D("设置别名")])),_:1})])]),h("div",{class:"w-full",onDragenter:oe(ie,["prevent"]),onDragover:u[3]||(u[3]=oe(()=>{},["prevent"])),onDragleave:oe(re,["prevent"]),onDrop:oe(Re,["prevent"])},[o.value?(b(),ae(es,{key:0,"file-list":S(F),onFolderClick:W,onTriggerFileUpload:Ce,onUpdateSelectedFiles:_e},null,8,["file-list"])):(b(),ae(Ls,{key:1,"file-list":S(F),onFolderClick:W,onTriggerFileUpload:Ce,onUpdateSelectedFiles:_e},null,8,["file-list"])),k.value?(b(),C("div",zs,u[16]||(u[16]=[h("p",{class:"text-white text-xl font-bold"},"Drop files here to upload",-1)]))):N("",!0)],32),_(Ze,{hook:S(w)},null,8,["hook"])]),_:1})]),_:1},8,["loading"]),_(ze,{class:"mt-6"},{default:I(()=>[u[17]||(u[17]=h("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"待上传文件列表",-1)),S(B).length===0?(b(),C("div",As," 暂无待上传文件 ")):(b(!0),C(J,{key:1},ce(S(B),L=>(b(),C("div",{key:L.name,class:"mb-4"},[h("div",js,[h("span",Es,A(L.name),1),h("span",{class:K(["text-xs font-semibold px-2 py-1 rounded-full",{"bg-blue-100 text-blue-800":L.status==="uploading","bg-green-100 text-green-800":L.status==="completed","bg-red-100 text-red-800":L.status==="error"}])},[D(A(L.status)+" ",1),h("span",Us,A(L.speed),1)],2)]),h("div",$s,[h("div",{class:"bg-blue-500 h-full transition-all duration-300 ease-in-out",style:se({width:`${L.progress}%`})},null,4)]),h("div",Ds,A(L.progress)+"% ",1)]))),128))]),_:1}),h("input",{type:"file",ref_key:"fileInput",ref:x,onChange:Oe,style:{display:"none"},multiple:""},null,544),_(Le,{modelValue:c.value,"onUpdate:modelValue":u[5]||(u[5]=L=>c.value=L),title:"新建文件夹",onOk:ne},{default:I(()=>[h("div",Ns,"当前目录："+A(r.value),1),_(Fe,{modelValue:i.value,"onUpdate:modelValue":u[4]||(u[4]=L=>i.value=L),placeholder:"请输入文件夹名称"},null,8,["modelValue"])]),_:1},8,["modelValue"]),_(Le,{modelValue:ve.value,"onUpdate:modelValue":u[7]||(u[7]=L=>ve.value=L),title:"设置别名",onOk:Be},{default:I(()=>[_(Fe,{modelValue:he.value,"onUpdate:modelValue":u[6]||(u[6]=L=>he.value=L),placeholder:"请输入别名"},null,8,["modelValue"])]),_:1},8,["modelValue"]),_(rt,{visible:g.value,"onUpdate:visible":u[8]||(u[8]=L=>g.value=L)},{default:I(()=>[_(Gt,{file:a.value,onFileDeleted:Me,onAliasUpdated:qe},null,8,["file"])]),_:1},8,["visible"]),_(He,{visible:ee.value,"onUpdate:visible":u[9]||(u[9]=L=>ee.value=L),title:"确认批量删除",onOk:Te,onCancel:u[10]||(u[10]=L=>ee.value=!1)},{default:I(()=>[h("p",null,"确定要删除选中的 "+A(O.value.length)+" 个文件/文件夹吗？此操作不可撤销。",1)]),_:1},8,["visible"])],64)}}};export{Ws as default};
