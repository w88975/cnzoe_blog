import{u as O}from"./useList-_48txNED.js";import{c as P}from"./db-Ta8sYuW1.js";import{r as m,C as j,q as I,w as x,y as M,h as u,o,j as h,a,F as y,k as N,u as p,s as U,e as s,t as d,l as v,v as b}from"./index-BQdnTLLj.js";import"./index-OP_gqBPT.js";function z(g={tableName:"",search:{},sort:"id",order:"asc"}){const{tableName:c,search:i,sort:r,order:l}=g;if(!c)throw new Error("tableName is required");return O(P,{tableName:c,search:i,sort:r,order:l})}const A={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},D=["onClick"],F={class:"flex justify-between items-center"},H={class:"text-lg font-semibold text-gray-800 truncate"},G={class:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},W={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Y=["onClick"],$={class:"flex flex-wrap gap-2 mb-2"},J={key:0,class:"px-1 py-1 bg-blue-100 text-blue-800 text-xs font-semibold"},K={key:1,class:"px-1 py-1 bg-red-100 text-red-800 text-xs font-semibold"},Q={key:2,class:"px-1 py-1 bg-yellow-100 text-yellow-800 text-xs font-semibold"},X={class:"flex justify-between items-center text-xs text-gray-600"},Z=["onClick"],ee={class:"flex items-center"},re={__name:"favorite",setup(g){const c=U(),i=M(),r=m(i.query.author),l=m(r.value?4:0),C=m(["已收藏","已保存","已缓存","作者","查询结果"]),f=z({tableName:"PORN91",search:r.value?{author_name:r.value,xx:{}}:{is_like:1}}),{list:k,loading:B,refresh:q}=f,S=n=>{const e=c.resolve({name:"91porn-detail",query:{tid:n.tid}});window.open(e.href,"_blank")},w=(n,e)=>{e.stopPropagation(),c.replace({query:{...i.query,author:n.author_name}}),r.value=n.author_name,l.value=4};return j(l,n=>{let e={};switch(n!==4&&(r.value="",c.replace({query:{...i.query,author:void 0}})),n){case 0:e={search:{is_like:1}};break;case 1:e={search:{full_save:1}};break;case 2:e={search:{}};break;case 4:e={search:{author_name:r.value}};break;case 3:e={sql:`SELECT author_name, COUNT(*) AS post_count
                    FROM PORN91 WHERE author_name IS NOT NULL AND author_name !=''
                    GROUP BY author_name`,sort:"post_count",order:"desc"};break}q(e,!0)}),(n,e)=>{const T=u("NvaTab"),V=u("NvaTextScroll"),L=u("NvaPagination"),R=u("a-spin"),E=u("BoxView");return o(),I(E,null,{default:x(()=>[h(R,{loading:p(B),class:"w-full h-full"},{default:x(()=>[h(T,{tabs:C.value,tabIndex:l.value,"onUpdate:tabIndex":e[0]||(e[0]=t=>l.value=t)},null,8,["tabs","tabIndex"]),l.value===3?(o(),a("div",A,[(o(!0),a(y,null,N(p(k),t=>(o(),a("div",{onClick:_=>w(t,_),key:t.author_name,class:"bg-white shadow-md rounded-lg p-4 hover:shadow-lg transition duration-300"},[s("div",F,[s("h3",H,d(t.author_name),1),s("span",G,d(t.post_count)+" 帖子",1)])],8,D))),128))])):(o(),a("div",W,[(o(!0),a(y,null,N(p(k),t=>(o(),a("div",{onClick:_=>S(t),key:t.id,class:"border border-gray-200 p-4 transition duration-300 cursor-pointer"},[s("div",$,[t.full_save?(o(),a("span",J,"存")):v("",!0),t.is_like?(o(),a("span",K,"收藏")):v("",!0),t.is_hot?(o(),a("span",Q,"精")):v("",!0)]),h(V,{start:"hover",class:"text-sm font-semibold text-gray-800 mb-2"},{default:x(()=>[b(d(t.title),1)]),_:2},1024),s("div",X,[s("span",{class:"flex items-center",onClick:_=>w(t,_)},[e[1]||(e[1]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),b(" "+d(t.author_name),1)],8,Z),s("span",ee,[e[2]||(e[2]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),b(" "+d(t.post_time),1)])])],8,Y))),128))])),h(L,{hook:p(f)},null,8,["hook"])]),_:1},8,["loading"])]),_:1})}}};export{re as default};
